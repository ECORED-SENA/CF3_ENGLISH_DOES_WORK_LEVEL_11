(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-643bf586"],{"07ac":function(t,a,e){var s=e("23e7"),n=e("6f53").values;s({target:"Object",stat:!0},{values:function(t){return n(t)}})},"1db7":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dialogo"},[e("div",{staticClass:"dialogo__header px-3 px-lg-4 py-2 py-lg-3"},[e("div",{staticClass:"mb-1"},[t._t("nombre-actividad",(function(){return[t._v("Arrastrar y soltar")]}))],2),e("div",{staticClass:"h3 mb-0"},[t._t("titulo-actividad",(function(){return[t._v("Titulo de actividad - Completa la conversación")]}))],2)]),e("div",{staticClass:"px-2 py-3 p-lg-4"},[e("div",{staticClass:"row g-0"},[e("div",{ref:"chat-"+t.uid,staticClass:"col-md-8 dialogo__chat"},t._l(t.dialogoComputed,(function(a,s){return e("div",{staticClass:"row g-0 flex-nowrap dialogo__chat__item mb-3"},[e("div",{staticClass:"col-auto dialogo__chat__item__person"},[e("img",{attrs:{src:a.personaje.img}}),e("span",{staticClass:"text-small",domProps:{innerHTML:t._s(a.personaje.nombre)}})]),e("div",{staticClass:"col dialogo__chat__item__message__container"},[e("div",{staticClass:"dialogo__chat__item__message"},[e("div",{staticClass:"row g-0 align-items-center dialogo__chat__item__message__bubble"},[e("div",{staticClass:"col dialogo__chat__item__message__text me-2"},[e("div",{staticClass:"dialogo__chat__item__message__text__eng h5 mb-0"},[t._l(a.textoIng,(function(s,n){return["*"===s?e("div",{key:"phrase-"+a.id+"-"+n,ref:"phrase-"+a.id,refInFor:!0,staticClass:"d-inline dialogo__chat__item__message__text__drop",class:{"is-active":t.dropId===a.id},on:{drop:function(e){return e.preventDefault(),t.onDrop(a.id)},dragenter:function(e){return e.preventDefault(),t.onDragEnter(a.id)},dragleave:function(a){return a.preventDefault(),t.onDragLeave()},dragover:function(t){t.preventDefault()}}},[t.answers[a.id]?e("span",{staticClass:"dialogo__chat__item__message__text__drop__response",domProps:{innerHTML:t._s(t.answers[a.id].palabra)}}):e("span",{staticClass:"dialogo__chat__item__message__text__drop__default"})]):e("span",{key:"phrase-"+a.id+"-"+n,domProps:{innerHTML:t._s(s)}})]}))],2),t.translations.includes(a.id)?e("div",{staticClass:"dialogo__chat__item__message__text__esp text-small"},[e("hr",{staticClass:"my-2"}),t._l(a.textoEsp,(function(a){return["*"===a?e("div",{staticClass:"d-inline dialogo__chat__item__message__text__drop"},[e("span",{staticClass:"dialogo__chat__item__message__text__drop__default"})]):e("span",{domProps:{innerHTML:t._s(a)}})]}))],2):t._e()]),e("div",{staticClass:"col-auto dialogo__chat__item__message__audio"},[e("Audio",{attrs:{audio:a.audio},on:{"audio-hover":function(a){t.mostrarIndicadorAudio=!1}}})],1)]),e("div",{staticClass:"d-flex justify-content-end me-3"},[e("button",{staticClass:"dialogo__chat__item__message__translate-btn text-small",on:{click:function(e){return t.toggleTranslate(a.id)}}},[t._v("Ver traducción")])])])]),e("div",{staticClass:"col-1"})])})),0),t._m(0),e("div",{staticClass:"col dialogo__words"},[e("div",{staticClass:"dialogo__words__content"},[e("div",{staticClass:"dialogo__words__content__explanation"},[t._t("descripcion-actividad",(function(){return[t._v("Arrastra y suelta las palabras en la conversación")]}))],2),t.wordsToShow.length?e("div",{staticClass:"dialogo__words__content__words__container mt-md-3 mb-3 mb-md-0"},[t.touchScreen?t._l(t.wordsToShow,(function(a){return e("div",{key:"word-"+a.id,ref:"word-"+a.id,refInFor:!0,staticClass:"h5 dialogo__words__word",class:{grabbing:a.id===t.dragId},domProps:{innerHTML:t._s(a.palabra)},on:{touchstart:function(e){return e.preventDefault(),t.onTouchStart(a.id)},touchmove:function(e){return e.preventDefault(),t.onTouchMove(e,a.id)},touchend:function(e){return e.preventDefault(),t.onTouchEnd(e,a.id)},touchcancel:function(e){return e.preventDefault(),t.onTouchCancel(e,a.id)}}})})):t._l(t.wordsToShow,(function(a){return e("div",{key:"word-"+a.id,staticClass:"h5 dialogo__words__word",class:{grabbing:a.id===t.dragId},attrs:{draggable:""},domProps:{innerHTML:t._s(a.palabra)},on:{dragstart:function(e){return t.onStartDrag(a.id)},dragend:function(a){return t.onEndDrag()}}})}))],2):t._e()]),e("div",{staticClass:"dialogo__words__footer"},[t.score?e("div",{staticClass:"dialogo__score mt-3"},["approved"===t.score?e("div",{staticClass:"dialogo__score p-3 approved"},[t._m(1)]):t._e(),"disapproved"===t.score?e("div",{staticClass:"dialogo__score px-3 py-2 disapproved"},[t._m(2)]):t._e()]):t._e(),Object.values(t.answers).length===t.words.length?e("div",{staticClass:"dialogo__words__footer__actions text-end mt-3"},[null===t.score?e("button",{on:{click:t.onCheck}},[t._v("Comprobar")]):"disapproved"===t.score?e("button",{on:{click:t.reset}},[t._v("Volver a empezar")]):t._e()]):t._e()])])])])])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-12 d-md-none"},[e("hr",{staticClass:"mb-3 mt-4"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col-2"},[s("div",{staticClass:"dialogo__score__icon"},[s("img",{attrs:{src:e("86bd")}})])]),s("div",{staticClass:"col"},[s("div",{staticClass:"dialogo__score__text h5 mb-0"},[t._v("¡Muy bien! ")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col-2"},[s("div",{staticClass:"dialogo__score__icon"},[s("img",{attrs:{src:e("3b23")}})])]),s("div",{staticClass:"col"},[s("div",{staticClass:"dialogo__score__text h5 mb-0"},[t._v("¡Casi!")])])])}],o=e("5530"),i=(e("d81d"),e("7db0"),e("4de4"),e("07ac"),e("caad"),e("2532"),e("ac1f"),e("1276"),e("5319"),e("b2ea")),r={name:"Dialogo",components:{Audio:i["default"]},props:{dialogo:{type:Object,default:function(){return{}}}},data:function(){return{uid:Math.floor(Math.random()*Math.pow(10,10)),touchScreen:!1,dragId:null,dropId:null,answers:{},translations:[],score:null}},computed:{dialogoComputed:function(){var t=this;return this.dialogo.dialogo?this.dialogo.dialogo.map((function(a,e){return Object(o["a"])(Object(o["a"])({},a),{},{id:t.uid+e+1,textoIng:t.splitPhrase(a.textoIng),textoEsp:t.splitPhrase(a.textoEsp),personaje:t.dialogo.personajes.find((function(t){return t.nombre===a.personaje}))})})):[]},words:function(){return this.shuffle(this.dialogoComputed.map((function(t){return{palabra:t.palabra,id:t.id}})).filter((function(t){return t.palabra})))},answerWordsIds:function(){return Object.values(this.answers).map((function(t){return t.dragId}))},wordsToShow:function(){var t=this;return this.words.filter((function(a){return!t.answerWordsIds.includes(a.id)}))}},created:function(){this.touchScreen="ontouchstart"in document.documentElement},methods:{onStartDrag:function(t){this.dragId=t},onEndDrag:function(){this.dragId=null},onDrop:function(t){var a=this;this.dragId&&(this.$set(this.answers,t,{dragId:this.dragId,dropId:t,palabra:this.words.find((function(t){return t.id===a.dragId})).palabra}),this.dropId=null)},onDragEnter:function(t){this.dropId=t},onDragLeave:function(){this.dropId=null},onTouchStart:function(t){var a=this.$refs["word-".concat(t)][0];a.classList.add("touch-drag")},onTouchMove:function(t,a){var e=this.$refs["word-".concat(a)][0],s=e.getBoundingClientRect(),n=t.touches[0];e.style.top="".concat(n.clientY-s.height/2,"px"),e.style.left="".concat(n.clientX-s.width/2,"px")},onTouchEnd:function(t,a){var e=this;if(t.changedTouches.length>1)this.resetDragElm(a);else{var s=this.$refs["chat-".concat(this.uid)],n=s.getBoundingClientRect(),o=t.changedTouches[0],i=o.clientX>n.x&&o.clientX<n.x+n.width,r=o.clientY>n.y&&o.clientY<n.y+n.height;if(i&&r){var c,d=this.words.some((function(t){var a=e.$refs["phrase-".concat(t.id)][0],s=a.getBoundingClientRect(),n=25,i=o.clientX>s.x-n&&o.clientX<s.x+s.width+n,r=o.clientY>s.y-n&&o.clientY<s.y+s.height+n;return i&&r&&(c=t.id),i&&r}));d&&this.$set(this.answers,c,{dragId:a,dropId:c,palabra:this.words.find((function(t){return t.id===a})).palabra}),this.resetDragElm(a)}else this.resetDragElm(a)}},onTouchCancel:function(t){this.resetDragElm(t)},resetDragElm:function(t){var a=this.$refs["word-".concat(t)][0];a.classList.remove("touch-drag")},toggleTranslate:function(t){this.translations.includes(t)?this.translations=this.translations.filter((function(a){return a!==t})):this.translations.push(t)},onCheck:function(){var t=Object.values(this.answers).every((function(t){return t.dragId===t.dropId}));this.score=t?"approved":"disapproved"},reset:function(){this.answers={},this.score=null},shuffle:function(t){for(var a=t.length-1;a>0;a--){var e=Math.floor(Math.random()*(a+1)),s=[t[e],t[a]];t[a]=s[0],t[e]=s[1]}return t},splitPhrase:function(t){return t.replace(/^\s+|\s+$/g,"&nbsp;").replace("***","___*___").split("___").filter(Boolean)}}},c=r,d=e("2877"),l=Object(d["a"])(c,s,n,!1,null,null,null);a["default"]=l.exports},2532:function(t,a,e){"use strict";var s=e("23e7"),n=e("5a34"),o=e("1d80"),i=e("ab13");s({target:"String",proto:!0,forced:!i("includes")},{includes:function(t){return!!~String(o(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},"3b23":function(t,a,e){t.exports=e.p+"img/red-x.76179c7f.svg"},"5a34":function(t,a,e){var s=e("44e7");t.exports=function(t){if(s(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6f53":function(t,a,e){var s=e("83ab"),n=e("df75"),o=e("fc6a"),i=e("d1e7").f,r=function(t){return function(a){var e,r=o(a),c=n(r),d=c.length,l=0,_=[];while(d>l)e=c[l++],s&&!i.call(r,e)||_.push(t?[e,r[e]]:r[e]);return _}};t.exports={entries:r(!0),values:r(!1)}},"86bd":function(t,a,e){t.exports=e.p+"img/green-check.f4a3fa01.svg"},ab13:function(t,a,e){var s=e("b622"),n=s("match");t.exports=function(t){var a=/./;try{"/./"[t](a)}catch(e){try{return a[n]=!1,"/./"[t](a)}catch(s){}}return!1}},caad:function(t,a,e){"use strict";var s=e("23e7"),n=e("4d64").includes,o=e("44d2");s({target:"Array",proto:!0},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")}}]);
//# sourceMappingURL=chunk-643bf586.1797ed07.js.map